(()=>{var p=["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],M=["color","backgroundColor"],d=e=>{let n=window.getComputedStyle(e),a={opacity:n.opacity};p.forEach(i=>{a[i]=n[i]}),M.forEach(i=>{a[i]=n[i]});let o=e.getBoundingClientRect(),l={left:o.left,right:o.right,top:o.top,bottom:o.bottom,width:o.width,height:o.height};return{styles:a,rect:l}},y=(e,n,a,o,l)=>{let i=!!o,u=n.rect.width/a.rect.width,f=n.rect.height/a.rect.height,c=[];if(i){let t=o.rect.width/l.rect.width,s=o.rect.height/l.rect.height,r=(n.rect.left-o.rect.left)/o.rect.width-(a.rect.left-l.rect.left)/l.rect.width,m=(n.rect.top-o.rect.top)/o.rect.height-(a.rect.top-l.rect.top)/l.rect.height;c.push(`translateX(${r*100}px)`),c.push(`translateY(${m*100}px)`),c.push(`scaleX(${u/t})`),c.push(`scaleY(${f/s})`)}else c.push(`translateX(${n.rect.left-a.rect.left}px)`),c.push(`translateY(${n.rect.top-a.rect.top}px)`),c.push(`scaleX(${u})`),c.push(`scaleY(${f})`);return{apply(){e.classList.contains("circle")&&console.log(e,n.styles,a.styles),e.style.transformOrigin="0 0",e.style.transform=c.join(" "),e.style.opacity=n.styles.opacity,p.forEach(s=>{let r=parseFloat(n.styles[s]);e.style[s]=`${r/u}px ${r/f}px`}),["color","backgroundColor"].forEach(s=>{e.style[s]=n.styles[s]})}}};function E(e,n){requestAnimationFrame(()=>{let t=c(e),s=l(t);u(t),e.classList.add(n),f(t),i(t);let r="transitionend",m=h=>{h.target===e&&(o(s),e.removeEventListener(r,m))};e.addEventListener(r,m),requestAnimationFrame(()=>{a(s)})});function a(t){let s="all 0.6s cubic-bezier(.17,.05,.42,1)";t.forEach(r=>{r.style.transition=s,r.style.transformOrigin="",r.style.transform="",r.style.opacity="",p.forEach(h=>{r.style[h]=""}),r.style.willChange="",["color","backgroundColor"].forEach(h=>{r.style[h]=""})})}function o(t){t.forEach(s=>{s.style.transition=""})}function l(t){let s=[],r=m=>{s.push(m.el),m.children.forEach(r)};return r(t),s}function i(t,s){(s?y(t.el,t.frame.first,t.frame.last,s.frame.first,s.frame.last):y(t.el,t.frame.first,t.frame.last)).apply(),t.children.forEach(m=>{i(m,t)})}function u(t){t.frame.first=d(t.el),t.children.forEach(u)}function f(t){t.frame.last=d(t.el),t.children.forEach(f)}function c(t){return{el:t,frame:{first:null,last:null},children:Array.from(t.children).map(c)}}}var g=(e,n)=>{let a=Array.from(e.children),o,l,i,u;requestAnimationFrame(()=>{o=d(e),l=a.map(d),e.classList.add(n),i=d(e),u=a.map(d),f(),c(e),a.forEach(s=>c(s));let t="all 0.7s cubic-bezier(.17,.05,.42,1)";e.style.transition=t,a.forEach(s=>s.style.transition=t)});function f(){let t=y(e,o,i),s=a.map((r,m)=>y(r,l[m],u[m],o,i));t.apply(),s.forEach(r=>{r.apply()})}function c(t){t.style.transformOrigin="",t.style.transform="",t.style.borderRadius=""}};var T=document.querySelector("[data-run]"),B=document.querySelector(".befaux .card"),H=Array.from(document.querySelectorAll("[data-motion]")),L=Array.from(document.querySelectorAll(".befaux > div"));H.forEach((e,n)=>{e.addEventListener("click",()=>{console.log(L[n],e),E(L[n],"end")})});T.addEventListener("click",()=>{g(B,"end")});})();
//# sourceMappingURL=index.js.map
